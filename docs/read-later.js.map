{
  "version": 3,
  "sources": ["../src/theme.ts", "../src/interactions.ts", "../src/read-later.ts"],
  "sourcesContent": ["const body = document.body;\r\n\r\nfunction applyInitialTheme() {\r\n  const themeToggleButton = document.getElementById(\"theme-toggle\");\r\n  const savedTheme = localStorage.getItem(\"theme\");\r\n\r\n  if (themeToggleButton) {\r\n    if (savedTheme === \"light\") {\r\n      body.classList.add(\"light-mode\");\r\n      themeToggleButton.innerHTML = `<span class=\"material-symbols-outlined\">dark_mode</span>`;\r\n    } else {\r\n      body.classList.remove(\"light-mode\");\r\n      themeToggleButton.innerHTML = `<span class=\"material-symbols-outlined\">light_mode</span>`;\r\n    }\r\n  }\r\n}\r\n\r\nfunction toggleTheme() {\r\n  const themeToggleButton = document.getElementById(\"theme-toggle\");\r\n  body.classList.toggle(\"light-mode\");\r\n\r\n  if (themeToggleButton) {\r\n    if (body.classList.contains(\"light-mode\")) {\r\n      localStorage.setItem(\"theme\", \"light\");\r\n      themeToggleButton.innerHTML = `<span class=\"material-symbols-outlined\">dark_mode</span>`;\r\n    } else {\r\n      localStorage.setItem(\"theme\", \"dark\");\r\n      themeToggleButton.innerHTML = `<span class=\"material-symbols-outlined\">light_mode</span>`;\r\n    }\r\n  }\r\n}\r\n\r\nexport function initializeTheme() {\r\n  const themeToggleButton = document.getElementById(\"theme-toggle\");\r\n  if (themeToggleButton) {\r\n    themeToggleButton.addEventListener(\"click\", toggleTheme);\r\n  }\r\n  applyInitialTheme();\r\n}\r\n", "let activePressableElement: Element | null = null;\r\n\r\nfunction handlePress(event: TouchEvent | MouseEvent) {\r\n  const target = event.target as HTMLElement;\r\n  const pressableElement = target.closest(\".pressable\");\r\n\r\n  if (pressableElement) {\r\n    pressableElement.classList.add(\"press-active\");\r\n    activePressableElement = pressableElement;\r\n  }\r\n}\r\n\r\nfunction handleRelease() {\r\n  if (activePressableElement) {\r\n    activePressableElement.classList.remove(\"press-active\");\r\n    activePressableElement = null;\r\n  }\r\n}\r\n\r\nexport function initializeGlobalInteractions() {\r\n  document.body.addEventListener(\"mousedown\", handlePress);\r\n  document.body.addEventListener(\"touchstart\", handlePress, { passive: true });\r\n\r\n  document.body.addEventListener(\"mouseup\", handleRelease);\r\n  document.body.addEventListener(\"mouseleave\", handleRelease);\r\n  document.body.addEventListener(\"touchend\", handleRelease);\r\n}\r\n", "import { initializeTheme } from \"./theme\";\r\nimport { initializeGlobalInteractions } from \"./interactions\";\r\n\r\nconst dbName = \"PwaHubDatabase\";\r\nconst storeName = \"articles\";\r\nlet db: IDBDatabase;\r\n\r\nconst form = document.getElementById(\"add-article-form\") as HTMLFormElement;\r\nconst urlInput = document.getElementById(\"url-input\") as HTMLInputElement;\r\nconst articleList = document.getElementById(\"article-list\") as HTMLUListElement;\r\n\r\nfunction openDatabase() {\r\n  const request = indexedDB.open(dbName, 1);\r\n  request.onerror = (event) =>\r\n    console.error(\"Veritaban\u0131 hatas\u0131:\", (event.target as IDBRequest).error);\r\n  request.onsuccess = (event) => {\r\n    db = (event.target as IDBOpenDBRequest).result;\r\n    renderInitialArticles();\r\n  };\r\n  request.onupgradeneeded = (event) => {\r\n    const db = (event.target as IDBOpenDBRequest).result;\r\n    if (!db.objectStoreNames.contains(storeName)) {\r\n      db.createObjectStore(storeName, { keyPath: \"id\", autoIncrement: true });\r\n    }\r\n  };\r\n}\r\n\r\nfunction createArticleElement(article: any): HTMLLIElement {\r\n  const li = document.createElement(\"li\");\r\n  li.dataset.id = article.id;\r\n  li.innerHTML = `\r\n    <a href=\"${article.url}\" target=\"_blank\">${article.title}</a>\r\n    <button class=\"delete-btn pressable icon-button\">\r\n      <span class=\"material-symbols-outlined\">delete</span>\r\n    </button>\r\n  `;\r\n  return li;\r\n}\r\n\r\nasync function renderInitialArticles() {\r\n  if (!db) return;\r\n\r\n  let skeletonHTML = \"\";\r\n  for (let i = 0; i < 3; i++) {\r\n    skeletonHTML += '<li class=\"skeleton\"></li>';\r\n  }\r\n  articleList.innerHTML = skeletonHTML;\r\n\r\n  const transaction = db.transaction(storeName, \"readonly\");\r\n  const store = transaction.objectStore(storeName);\r\n  const getAllRequest = store.getAll();\r\n\r\n  getAllRequest.onerror = (event) =>\r\n    console.error(\"Makaleler al\u0131namad\u0131:\", (event.target as IDBRequest).error);\r\n\r\n  getAllRequest.onsuccess = () => {\r\n    articleList.innerHTML = \"\";\r\n    const articles = getAllRequest.result.reverse();\r\n\r\n    if (articles.length === 0) {\r\n      const emptyStateHTML = `\r\n        <div class=\"empty-state-container\">\r\n          <span class=\"material-symbols-outlined icon\">inbox</span>\r\n          <p class=\"title\">Listeniz Hen\u00FCz Bo\u015F</p>\r\n          <p>Kaydetmek istedi\u011Finiz makalelerin linklerini yukar\u0131daki alana yap\u0131\u015Ft\u0131r\u0131n.</p>\r\n        </div>\r\n      `;\r\n      articleList.innerHTML = emptyStateHTML;\r\n    } else {\r\n      articles.forEach((article) => {\r\n        const li = createArticleElement(article);\r\n        articleList.appendChild(li);\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nfunction addArticle(event: SubmitEvent) {\r\n  event.preventDefault();\r\n  const url = urlInput.value.trim();\r\n  if (!url) return;\r\n  let title: string;\r\n  try {\r\n    title = new URL(url).hostname;\r\n  } catch (error) {\r\n    alert(\"L\u00FCtfen ge\u00E7erli bir URL girin.\");\r\n    return;\r\n  }\r\n  const newArticleData = { url, title, savedAt: new Date() };\r\n  const transaction = db.transaction(storeName, \"readwrite\");\r\n  const store = transaction.objectStore(storeName);\r\n  const addRequest = store.add(newArticleData);\r\n\r\n  addRequest.onerror = (event) =>\r\n    console.error(\"Makale eklenemedi:\", (event.target as IDBRequest).error);\r\n\r\n  addRequest.onsuccess = () => {\r\n    urlInput.value = \"\";\r\n    const newArticleWithId = { ...newArticleData, id: addRequest.result };\r\n\r\n    const emptyState = articleList.querySelector(\".empty-state-container\");\r\n    if (emptyState) {\r\n      articleList.innerHTML = \"\";\r\n    }\r\n\r\n    const li = createArticleElement(newArticleWithId);\r\n    li.classList.add(\"item-pop-in-active\");\r\n    articleList.prepend(li);\r\n  };\r\n}\r\n\r\nfunction deleteArticle(event: MouseEvent) {\r\n  const target = event.target as HTMLElement;\r\n  const deleteButton = target.closest(\".delete-btn\");\r\n  if (deleteButton) {\r\n    const li = deleteButton.closest(\"li\");\r\n    if (li && li.dataset.id) {\r\n      const id = parseInt(li.dataset.id, 10);\r\n      li.classList.add(\"item-collapsing\");\r\n      li.addEventListener(\r\n        \"transitionend\",\r\n        () => {\r\n          const transaction = db.transaction(storeName, \"readwrite\");\r\n          const store = transaction.objectStore(storeName);\r\n          const deleteRequest = store.delete(id);\r\n          deleteRequest.onerror = (event) =>\r\n            console.error(\r\n              \"Makale silinemedi:\",\r\n              (event.target as IDBRequest).error\r\n            );\r\n          deleteRequest.onsuccess = () => {\r\n            li.remove();\r\n            if (articleList.children.length === 0) {\r\n              renderInitialArticles();\r\n            }\r\n          };\r\n        },\r\n        { once: true }\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nform.addEventListener(\"submit\", addArticle);\r\narticleList.addEventListener(\"click\", deleteArticle);\r\n\r\nif (\"serviceWorker\" in navigator) {\r\n  window.addEventListener(\"load\", () => {\r\n    navigator.serviceWorker\r\n      .register(\"/service-worker.js\")\r\n      .then((registration) => {\r\n        console.log(\r\n          \"Service Worker ba\u015Far\u0131yla kaydedildi: \",\r\n          registration.scope\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"Service Worker kayd\u0131 ba\u015Far\u0131s\u0131z: \", err);\r\n      });\r\n  });\r\n}\r\n\r\nopenDatabase();\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  initializeTheme();\r\n  initializeGlobalInteractions();\r\n});\r\n"],
  "mappings": "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",
  "names": ["db", "event"]
}
